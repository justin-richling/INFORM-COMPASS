<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Run Table</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 20px;
}

/* ---- Search ---- */
#searchBox {
    padding: 6px 10px;
    width: 300px;
    margin-bottom: 12px;
}

/* ---- Table ---- */
table {
    border-collapse: collapse;
    width: 100%;
    table-layout: fixed;
}

th, td {
    border: 1px solid #ccc;
    padding: 6px 8px;
    text-align: left;
    vertical-align: top;
    word-wrap: break-word;
}

th {
    background-color: #f2f2f2;
    font-weight: bold;
}

/* Highlight matches */
.highlight {
    background-color: yellow;
    color: black;
}

/* ---- Pagination ---- */
#pagination {
    margin-top: 12px;
    text-align: center;
}

.page-btn {
    margin: 0 4px;
    padding: 4px 8px;
    border: 1px solid #999;
    cursor: pointer;
    background-color: #f8f8f8;
}

.page-btn.active {
    background-color: #ddd;
    font-weight: bold;
}
</style>
</head>

<body>

<h2>Runs</h2>

<input
    type="text"
    id="searchBox"
    placeholder="Search run name..."
>

<table id="runTable">
    <thead>
        <tr>
            <th style="width: 25%;">Run Name</th>
            <th style="width: 25%;">Model</th>
            <th style="width: 25%;">Resolution</th>
            <th style="width: 25%;">Notes</th>
        </tr>
    </thead>
    <tbody>
        <!-- Example rows â€” replace with yours -->
        <tr><td>run_A_v1</td><td>CESM</td><td>1deg</td><td>baseline</td></tr>
        <tr><td>run_A_v2</td><td>CESM</td><td>1deg</td><td>tuned</td></tr>
        <tr><td>run_B_test</td><td>CAM</td><td>0.25deg</td><td>experiment</td></tr>
        <tr><td>long_run_name_example_01</td><td>CESM</td><td>2deg</td><td>spinup</td></tr>
        <tr><td>nudged_case_2019</td><td>CAM</td><td>1deg</td><td>nudging</td></tr>
        <tr><td>nudged_case_2020</td><td>CAM</td><td>1deg</td><td>nudging</td></tr>
        <tr><td>nudged_case_2021</td><td>CAM</td><td>1deg</td><td>nudging</td></tr>
        <tr><td>nudged_case_2022</td><td>CAM</td><td>1deg</td><td>nudging</td></tr>
        <tr><td>nudged_case_2023</td><td>CAM</td><td>1deg</td><td>nudging</td></tr>
        <tr><td>nudged_case_2024</td><td>CAM</td><td>1deg</td><td>nudging</td></tr>
        <tr><td>test_run_X</td><td>CESM</td><td>0.5deg</td><td>test</td></tr>
        <tr><td>test_run_Y</td><td>CESM</td><td>0.5deg</td><td>test</td></tr>
        <tr><td>test_run_Z</td><td>CESM</td><td>0.5deg</td><td>test</td></tr>
        <tr><td>final_prod</td><td>CESM</td><td>1deg</td><td>production</td></tr>
        <tr><td>extra_case_01</td><td>CAM</td><td>2deg</td><td>extra</td></tr>
        <tr><td>extra_case_02</td><td>CAM</td><td>2deg</td><td>extra</td></tr>
    </tbody>
</table>

<div id="pagination"></div>

<script>
const rowsPerPage = 13;
let currentPage = 1;

const table = document.getElementById("runTable");
const tbody = table.querySelector("tbody");
const rows = Array.from(tbody.querySelectorAll("tr"));
const pagination = document.getElementById("pagination");
const searchBox = document.getElementById("searchBox");

/* ---------- Pagination ---------- */
function renderTable() {
    const start = (currentPage - 1) * rowsPerPage;
    const end = start + rowsPerPage;

    rows.forEach((row, index) => {
        row.style.display = (index >= start && index < end) ? "" : "none";
    });
}

function renderPagination() {
    pagination.innerHTML = "";
    const pageCount = Math.ceil(rows.length / rowsPerPage);

    for (let i = 1; i <= pageCount; i++) {
        const btn = document.createElement("span");
        btn.textContent = i;
        btn.className = "page-btn" + (i === currentPage ? " active" : "");
        btn.onclick = () => {
            currentPage = i;
            renderTable();
            renderPagination();
        };
        pagination.appendChild(btn);
    }
}

/* ---------- Search Highlight Only ---------- */
function clearHighlights() {
    rows.forEach(row => {
        row.querySelectorAll("td").forEach(cell => {
            cell.innerHTML = cell.textContent;
        });
    });
}

searchBox.addEventListener("input", () => {
    const query = searchBox.value.toLowerCase();
    clearHighlights();

    if (!query) return;

    rows.forEach(row => {
        row.querySelectorAll("td").forEach(cell => {
            const text = cell.textContent;
            const idx = text.toLowerCase().indexOf(query);
            if (idx !== -1) {
                cell.innerHTML =
                    text.substring(0, idx) +
                    `<span class="highlight">` +
                    text.substring(idx, idx + query.length) +
                    `</span>` +
                    text.substring(idx + query.length);
            }
        });
    });
});

/* Init */
renderTable();
renderPagination();
</script>

</body>
</html>
